(function(){"use strict";var t={7433:function(t,e,n){var a=n(9242),l=n(3396);const i=(0,l.Uk)(" window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-WKB857318N'); ");function u(t,e,n,a,u,r){const o=(0,l.up)("flight-view");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(o),((0,l.wg)(),(0,l.j4)((0,l.LL)("script"),null,{default:(0,l.w5)((()=>[i])),_:1}))],64)}const r=(0,l._)("h1",null,"今天航班熔断了吗？",-1),o=(0,l._)("hr",null,null,-1),s=(0,l.Uk)("民航局文件"),d=(0,l._)("p",null,[(0,l.Uk)("不考虑奖励航班和控制客座率措施。"),(0,l._)("strong",null,"仅供参考！")],-1),c=(0,l.Uk)(" 首个航班入境日期："),g=(0,l._)("br",null,null,-1),h=(0,l.Uk)(" 周数："),f=(0,l._)("p",null,[(0,l.Uk)("图例：日期，取消开关，阳性数量 -> 熔断状态，航班状态 "),(0,l._)("br"),(0,l.Uk)(" 地区提示：美国：航司可能对航班进行"),(0,l._)("a",{href:"https://piao.tips/7bc7e7ee15/",target:"_blank"},"「规律性取消」"),(0,l.Uk)("，可使用航班卡片中的开关手动取消特定航班。")],-1);function p(t,e,n,a,i,u){const p=(0,l.up)("a-button"),m=(0,l.up)("github-outlined"),b=(0,l.up)("a-date-picker"),w=(0,l.up)("a-input-number"),S=(0,l.up)("a-col"),v=(0,l.up)("a-row"),k=(0,l.up)("date-item");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(v,{justify:"space-around"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{lg:12,md:24},{default:(0,l.w5)((()=>[r,o,(0,l.Wm)(p,{href:"http://www.caac.gov.cn/XXGK/XXGK/TZTG/202104/t20210429_207386.html",target:"_blank"},{default:(0,l.w5)((()=>[s])),_:1}),(0,l.Wm)(p,{href:"https://github.com/jerrylususu/rongduan_or_not",target:"_blank"},{default:(0,l.w5)((()=>[(0,l.Wm)(m)])),_:1}),d,c,(0,l.Wm)(b,{value:i.beginDate,"onUpdate:value":e[0]||(e[0]=t=>i.beginDate=t),onChange:u.inputHandler},null,8,["value","onChange"]),g,h,(0,l.Wm)(w,{value:i.numberOfWeeks,"onUpdate:value":e[1]||(e[1]=t=>i.numberOfWeeks=t),min:1,max:40,onChange:u.inputHandler},null,8,["value","onChange"]),f])),_:1})])),_:1}),(0,l.Wm)(v,{justify:"space-around"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{lg:12,md:24},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.datesDetails,((t,e)=>((0,l.wg)(),(0,l.iD)("div",{key:t.date},[(0,l.Wm)(k,{date:t.date,count:t.count,index:e,triggerStatus:t.triggerStatus,flightStatus:t.flightStatus,enabled:t.enabled,onItemChange:u.itemChangeHandler},null,8,["date","count","index","triggerStatus","flightStatus","enabled","onItemChange"])])))),128))])),_:1})])),_:1})])}n(6497);var m=n(3680),b=(n(8510),n(383)),w=(n(5703),n(6643)),S=(n(3332),n(3969)),v=(n(367),n(34)),k=(n(4535),n(6792)),C=n(2134),D=n(7139);const y={key:0},_={key:1};function W(t,e,n,a,i,u){const r=(0,l.up)("a-switch"),o=(0,l.up)("a-input-number"),s=(0,l.up)("a-button"),d=(0,l.up)("check-outlined"),c=(0,l.up)("stop-outlined"),g=(0,l.up)("a-card");return(0,l.wg)(),(0,l.j4)(g,{class:(0,D.C_)([n.flightStatus])},{default:(0,l.w5)((()=>[(0,l.Uk)((0,D.zw)(n.date)+" ",1),(0,l.Wm)(r,{checked:i.localEnabled,"onUpdate:checked":e[0]||(e[0]=t=>i.localEnabled=t),size:"small",onChange:u.enabledChangeHandler},null,8,["checked","onChange"]),(0,l.Wm)(o,{value:i.localCount,"onUpdate:value":e[1]||(e[1]=t=>i.localCount=t),onChange:u.countChangeHandler,min:0,disabled:!i.localEnabled},null,8,["value","onChange","disabled"]),(0,l.Wm)(s,{class:(0,D.C_)(n.triggerStatus)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,D.zw)(u.triggerStatusName),1)])),_:1},8,["class"]),"yes"===n.flightStatus?((0,l.wg)(),(0,l.iD)("span",y,[(0,l.Wm)(d)])):((0,l.wg)(),(0,l.iD)("span",_,[(0,l.Wm)(c)]))])),_:1},8,["class"])}n(7636);var O=n(3457),Z=(n(7358),n(153)),j=n(6845),x=n(3320),U={components:{AButton:k.Z,AInputNumber:w.Z,ACard:Z.ZP,CheckOutlined:j.Z,StopOutlined:x.Z,ASwitch:O.ZP},props:{date:{type:String,required:!0},count:{type:Number,required:!0},index:{type:Number,required:!0},triggerStatus:{type:String,required:!0},flightStatus:{type:String,required:!0},enabled:{type:Boolean,required:!0}},emits:["itemChange"],data(){return{localCount:this.count,triggerStatusMap:{ok:"正常",minor:"小熔断",major:"大熔断",immediate:"超级熔断",cancelled:"取消"},localEnabled:this.enabled}},methods:{countChangeHandler(t){this.localCount=t,this.$emit("itemChange",{date:this.date,count:this.localCount,enabled:this.localEnabled,index:this.index})},enabledChangeHandler(t){this.localEnabled=t,this.localEnabled||(this.localCount=0),this.$emit("itemChange",{date:this.date,count:this.localCount,enabled:this.localEnabled,index:this.index})}},computed:{triggerStatusName(){return this.triggerStatus in this.triggerStatusMap?this.triggerStatusMap[this.triggerStatus]:this.triggerStatus.replace("broken by","熔断，触发于")}},watch:{count:{handler(t){this.localCount=t},immediate:!0},enabled:{handler(t){this.localEnabled=t},immediate:!0}}},A=n(89);const E=(0,A.Z)(U,[["render",W],["__scopeId","data-v-efaf0314"]]);var H=E,N={components:{AButton:k.Z,ADatePicker:v.ZP,ASpace:S.Z,AInputNumber:w.Z,DateItem:H,ARow:b.Z,ACol:m.Z,GithubOutlined:C.Z},data(){return{beginDate:"",numberOfWeeks:20,datesDetails:[]}},methods:{inputHandler(t){if(!t)return;let e=[];for(let n=1;n<=this.numberOfWeeks;n++){let t=new Date(this.beginDate);t.setDate(t.getDate()+7*(n-1));let a=new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().split("T")[0];e.push({date:a,count:0,triggerStatus:"ok",flightStatus:"yes",enabled:!0})}for(let n=0;n<e.length;n++){let t=this.datesDetails.filter((t=>t.date===e[n].date));1==t.length&&(e[n].count=t[0].count,e[n].enabled=t[0].enabled),this.datesDetails.push(e[n])}this.datesDetails=e,this.reCalculate()},itemChangeHandler(t){this.datesDetails[t.index].count=t.count,this.datesDetails[t.index].enabled=t.enabled,this.reCalculate()},reCalculate(){console.log("recalculating...");for(let t=0;t<this.datesDetails.length;t++){let e=this.datesDetails[t];e.triggerStatus="ok",e.flightStatus="yes",e.enabled||(e.triggerStatus="cancelled",e.flightStatus="no")}for(let t=0;t<this.datesDetails.length;t++){let e=this.datesDetails[t],n=0,a=0,l=!1;if("yes"===e.flightStatus)if(0<=e.count&&e.count<5)e.triggerStatus="ok";else if(5<=e.count&&e.count<10)e.triggerStatus="minor",n=2,a=3;else if(10<=e.count&&e.count<30){if(e.triggerStatus="major",n=4,a=3,t-1>=0){let e=this.datesDetails[t-1];e.count>=10&&(n=8,a=1,l=!0)}}else e.triggerStatus="immediate",n=4,a=1;let i=0;while(n>0&&t+a+i<this.datesDetails.length){let u=this.datesDetails[t+a+i];u.enabled&&("yes"===u.flightStatus||l)&&(u.flightStatus="no",u.triggerStatus=`broken by ${e.date}`,n--,0===n&&(l=!1)),i++}}}}};const I=(0,A.Z)(N,[["render",p]]);var T=I,q={name:"App",components:{FlightView:T},created(){document.title="今天航班熔断了吗？"},mounted(){let t=document.createElement("script");t.setAttribute("src","https://www.googletagmanager.com/gtag/js?id=G-WKB857318N"),document.head.appendChild(t)}};const G=(0,A.Z)(q,[["render",u]]);var P=G;n(2467);(0,a.ri)(P).mount("#app")}},e={};function n(a){var l=e[a];if(void 0!==l)return l.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,a,l,i){if(!a){var u=1/0;for(d=0;d<t.length;d++){a=t[d][0],l=t[d][1],i=t[d][2];for(var r=!0,o=0;o<a.length;o++)(!1&i||u>=i)&&Object.keys(n.O).every((function(t){return n.O[t](a[o])}))?a.splice(o--,1):(r=!1,i<u&&(u=i));if(r){t.splice(d--,1);var s=l();void 0!==s&&(e=s)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[a,l,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var l,i,u=a[0],r=a[1],o=a[2],s=0;if(u.some((function(e){return 0!==t[e]}))){for(l in r)n.o(r,l)&&(n.m[l]=r[l]);if(o)var d=o(n)}for(e&&e(a);s<u.length;s++)i=u[s],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(d)},a=self["webpackChunkrongduanlema"]=self["webpackChunkrongduanlema"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(7433)}));a=n.O(a)})();
//# sourceMappingURL=app.c4aa3580.js.map