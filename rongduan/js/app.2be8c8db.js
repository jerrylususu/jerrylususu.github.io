(function(){"use strict";var t={8783:function(t,e,a){var n=a(9242),l=a(3396);const i=(0,l.Uk)(" window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-WKB857318N'); ");function u(t,e,a,n,u,r){const s=(0,l.up)("flight-view");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(s),((0,l.wg)(),(0,l.j4)((0,l.LL)("script"),null,{default:(0,l.w5)((()=>[i])),_:1}))],64)}const r=(0,l._)("h1",null,"今天航班熔断了吗？",-1),s=(0,l._)("hr",null,null,-1),o=(0,l.Uk)("民航局文件"),d=(0,l._)("p",null,[(0,l.Uk)("不考虑奖励航班和控制客座率措施。"),(0,l._)("strong",null,"仅供参考！")],-1),c=(0,l.Uk)(" 首个航班入境日期："),g=(0,l._)("br",null,null,-1),h=(0,l.Uk)(" 周数："),p=(0,l._)("p",null,[(0,l.Uk)("图例：日期，取消开关，阳性数量 -> 熔断状态，航班状态 "),(0,l._)("br"),(0,l.Uk)(" 地区提示：美国：航司可能对航班进行"),(0,l._)("a",{href:"https://piao.tips/7bc7e7ee15/",target:"_blank"},"「规律性取消」"),(0,l.Uk)("，可使用航班卡片中的开关手动取消特定航班。")],-1),f=(0,l._)("p",null,"正常：航班状态正常（0~4 例阳性，不触发熔断）",-1),m=(0,l._)("p",null,"小熔断：5~9 例阳性，触发航班入境第四周起的 2 周熔断",-1),b=(0,l._)("p",null,"大熔断：10~30 例阳性，触发航班入境第四周起的 4 周熔断（若连续两周 10 例或以上阳性，立刻触发 4 周熔断）",-1),w=(0,l._)("p",null,"超级熔断：30 例以上阳性，立即触发 4 周熔断",-1),S=(0,l._)("p",null,"(稳)：（实验性）若触发连续熔断，熔断恢复后的头两班是一定能正常执飞的。",-1);function y(t,e,a,n,i,u){const y=(0,l.up)("a-button"),C=(0,l.up)("github-outlined"),k=(0,l.up)("a-date-picker"),v=(0,l.up)("a-input-number"),D=(0,l.up)("a-collapse-panel"),_=(0,l.up)("a-collapse"),W=(0,l.up)("a-col"),O=(0,l.up)("a-row"),Z=(0,l.up)("date-item");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(O,{justify:"space-around"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{lg:12,md:24},{default:(0,l.w5)((()=>[r,s,(0,l.Wm)(y,{href:"http://www.caac.gov.cn/XXGK/XXGK/TZTG/202104/t20210429_207386.html",target:"_blank"},{default:(0,l.w5)((()=>[o])),_:1}),(0,l.Wm)(y,{href:"https://github.com/jerrylususu/rongduan_or_not",target:"_blank"},{default:(0,l.w5)((()=>[(0,l.Wm)(C)])),_:1}),d,c,(0,l.Wm)(k,{value:i.beginDate,"onUpdate:value":e[0]||(e[0]=t=>i.beginDate=t),onChange:u.inputHandler},null,8,["value","onChange"]),g,h,(0,l.Wm)(v,{value:i.numberOfWeeks,"onUpdate:value":e[1]||(e[1]=t=>i.numberOfWeeks=t),min:1,max:40,onChange:u.inputHandler},null,8,["value","onChange"]),p,(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(D,{key:"states",header:"状态说明"},{default:(0,l.w5)((()=>[f,m,b,w,S])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(O,{justify:"space-around"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{lg:12,md:24},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.datesDetails,((t,e)=>((0,l.wg)(),(0,l.iD)("div",{key:t.date},[(0,l.Wm)(Z,{date:t.date,count:t.count,index:e,triggerStatus:t.triggerStatus,flightStatus:t.flightStatus,enabled:t.enabled,surely:t.surely,onItemChange:u.itemChangeHandler},null,8,["date","count","index","triggerStatus","flightStatus","enabled","surely","onItemChange"])])))),128))])),_:1})])),_:1})])}a(2008);var C=a(579),k=(a(6497),a(3680)),v=(a(8510),a(383)),D=(a(5703),a(6643)),_=(a(3332),a(3969)),W=(a(367),a(34)),O=(a(4535),a(6792)),Z=a(2134),j=a(7139);const x={key:0},A={key:1};function U(t,e,a,n,i,u){const r=(0,l.up)("a-switch"),s=(0,l.up)("a-input-number"),o=(0,l.up)("a-button"),d=(0,l.up)("check-outlined"),c=(0,l.up)("stop-outlined"),g=(0,l.up)("a-card");return(0,l.wg)(),(0,l.j4)(g,{class:(0,j.C_)([a.flightStatus])},{default:(0,l.w5)((()=>[(0,l.Uk)((0,j.zw)(a.date)+" ",1),(0,l.Wm)(r,{checked:i.localEnabled,"onUpdate:checked":e[0]||(e[0]=t=>i.localEnabled=t),size:"small",onChange:u.enabledChangeHandler},null,8,["checked","onChange"]),(0,l.Wm)(s,{value:i.localCount,"onUpdate:value":e[1]||(e[1]=t=>i.localCount=t),onChange:u.countChangeHandler,min:0,disabled:!i.localEnabled},null,8,["value","onChange","disabled"]),(0,l.Wm)(o,{class:(0,j.C_)(a.triggerStatus)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,j.zw)(u.surelyStr+u.triggerStatusName),1)])),_:1},8,["class"]),"yes"===a.flightStatus?((0,l.wg)(),(0,l.iD)("span",x,[(0,l.Wm)(d)])):((0,l.wg)(),(0,l.iD)("span",A,[(0,l.Wm)(c)]))])),_:1},8,["class"])}a(7636);var E=a(3457),H=(a(7358),a(1852)),P=a(6845),N=a(3320),q={components:{AButton:O.Z,AInputNumber:D.Z,ACard:H.ZP,CheckOutlined:P.Z,StopOutlined:N.Z,ASwitch:E.ZP},props:{date:{type:String,required:!0},count:{type:Number,required:!1,default:0},index:{type:Number,required:!0},triggerStatus:{type:String,required:!0},flightStatus:{type:String,required:!0},enabled:{type:Boolean,required:!0},surely:{type:Boolean,required:!0}},emits:["itemChange"],data(){return{localCount:this.count,triggerStatusMap:{ok:"正常",minor:"小熔断",major:"大熔断",immediate:"超级熔断",cancelled:"取消"},localEnabled:this.enabled}},methods:{countChangeHandler(t){this.localCount=t,this.$emit("itemChange",{date:this.date,count:this.localCount,enabled:this.localEnabled,index:this.index})},enabledChangeHandler(t){this.localEnabled=t,this.localEnabled||(this.localCount=0),this.$emit("itemChange",{date:this.date,count:this.localCount,enabled:this.localEnabled,index:this.index})}},computed:{triggerStatusName(){return this.triggerStatus in this.triggerStatusMap?this.triggerStatusMap[this.triggerStatus]:this.triggerStatus.replace("broken by","熔断，触发于")},surelyStr(){return this.surely?"(稳)":""}},watch:{count:{handler(t){this.localCount=t},immediate:!0},enabled:{handler(t){this.localEnabled=t},immediate:!0}}},I=a(89);const T=(0,I.Z)(q,[["render",U],["__scopeId","data-v-d5e039c4"]]);var B=T,G={components:{AButton:O.Z,ADatePicker:W.ZP,ASpace:_.Z,AInputNumber:D.Z,DateItem:B,ARow:v.Z,ACol:k.Z,GithubOutlined:Z.Z,ACollapse:C.ZP,ACollapsePanel:C.ZP.Panel},data(){return{beginDate:"",numberOfWeeks:20,datesDetails:[]}},methods:{inputHandler(t){if(!t)return;let e=[];for(let a=1;a<=this.numberOfWeeks;a++){let t=new Date(this.beginDate);t.setDate(t.getDate()+7*(a-1));let n=new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().split("T")[0];e.push({date:n,count:0,triggerStatus:"ok",flightStatus:"yes",enabled:!0,surely:!1})}for(let a=0;a<e.length;a++){let t=this.datesDetails.filter((t=>t.date===e[a].date));1==t.length&&(e[a].count=t[0].count,e[a].enabled=t[0].enabled),this.datesDetails.push(e[a])}this.datesDetails=e,this.reCalculate()},itemChangeHandler(t){this.datesDetails[t.index].count=t.count,this.datesDetails[t.index].enabled=t.enabled,this.reCalculate()},reCalculate(){console.log("recalculating...");for(let e=0;e<this.datesDetails.length;e++){let t=this.datesDetails[e];t.triggerStatus="ok",t.flightStatus="yes",t.surely=!1,t.enabled||(t.triggerStatus="cancelled",t.flightStatus="no")}for(let e=0;e<this.datesDetails.length;e++){let t=this.datesDetails[e],a=0,n=0,l=!1;if("yes"===t.flightStatus)if(0<=t.count&&t.count<5)t.triggerStatus="ok";else if(5<=t.count&&t.count<10)t.triggerStatus="minor",a=2,n=3;else if(10<=t.count&&t.count<30){if(t.triggerStatus="major",a=4,n=3,e-1>=0){let t=this.datesDetails[e-1];t.count>=10&&(a=8,n=1,l=!0)}}else t.triggerStatus="immediate",a=4,n=1;let i=0;while(a>0&&e+n+i<this.datesDetails.length){let u=this.datesDetails[e+n+i];u.enabled&&("yes"===u.flightStatus||l)&&(u.flightStatus="no",u.triggerStatus=`broken by ${t.date}`,a--,0===a&&(l=!1)),i++}}let t=0;while(t<this.datesDetails.length){if("no"===this.datesDetails[t].flightStatus&&t-1>=0&&["major","minor","immediate"].includes(this.datesDetails[t-1].triggerStatus)){console.log(t);while("no"===this.datesDetails[t].flightStatus)t++;let e=2;while(e>0&&t<this.datesDetails.length)"yes"===this.datesDetails[t].flightStatus&&(e--,this.datesDetails[t].surely=!0),t++}t++}}}};const K=(0,I.Z)(G,[["render",y]]);var L=K,z={name:"App",components:{FlightView:L},created(){document.title="今天航班熔断了吗？"},mounted(){let t=document.createElement("script");t.setAttribute("src","https://www.googletagmanager.com/gtag/js?id=G-WKB857318N"),document.head.appendChild(t)}};const M=(0,I.Z)(z,[["render",u]]);var X=M;a(2467);(0,n.ri)(X).mount("#app")}},e={};function a(n){var l=e[n];if(void 0!==l)return l.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,n,l,i){if(!n){var u=1/0;for(d=0;d<t.length;d++){n=t[d][0],l=t[d][1],i=t[d][2];for(var r=!0,s=0;s<n.length;s++)(!1&i||u>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[s])}))?n.splice(s--,1):(r=!1,i<u&&(u=i));if(r){t.splice(d--,1);var o=l();void 0!==o&&(e=o)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,l,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var l,i,u=n[0],r=n[1],s=n[2],o=0;if(u.some((function(e){return 0!==t[e]}))){for(l in r)a.o(r,l)&&(a.m[l]=r[l]);if(s)var d=s(a)}for(e&&e(n);o<u.length;o++)i=u[o],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},n=self["webpackChunkrongduanlema"]=self["webpackChunkrongduanlema"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(8783)}));n=a.O(n)})();
//# sourceMappingURL=app.2be8c8db.js.map