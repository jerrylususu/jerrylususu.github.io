<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ç®—æ³• on Nekonull&#39;s Garden</title>
    <link>https://nekonull.me/tags/%E7%AE%97%E6%B3%95/</link>
    <description>Recent content in ç®—æ³• on Nekonull&#39;s Garden</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>CC-BY-SA-4.0</copyright>
    <lastBuildDate>Tue, 10 May 2022 22:54:00 +0800</lastBuildDate><atom:link href="https://nekonull.me/tags/%E7%AE%97%E6%B3%95/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Python `itertools.permutations` ä½¿ç”¨çš„æ’åˆ—ç®—æ³•</title>
      <link>https://nekonull.me/posts/py-itertools-permutation-algo/</link>
      <pubDate>Tue, 10 May 2022 22:54:00 +0800</pubDate>
      
      <guid>https://nekonull.me/posts/py-itertools-permutation-algo/</guid>
      <description>&lt;p&gt;&lt;strong&gt;TL;DR&lt;/strong&gt;ï¼šè¿™æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŸºäºå›æº¯ï¼Œåˆ©ç”¨å…ƒç´ äº¤æ¢çš„é€’å½’æ’åˆ—ç”Ÿæˆç®—æ³•ï¼Œä½†è¢«é‡å†™æˆäº†å¾ªç¯å½¢å¼ï¼ˆå¯èƒ½å‡ºäºæ•ˆç‡è€ƒé‡ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¼•å­&#34;&gt;å¼•å­&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘åœ¨ç®—æ³•å¤å¥ï¼Œåˆ·åˆ°äº†æ’åˆ—ç›¸å…³çš„é¢˜ç›®ã€‚æ°å·§ Python å†…ç½®äº†ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·åº“ &lt;code&gt;itertools&lt;/code&gt;ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª &lt;code&gt;permutations(iterable, r)&lt;/code&gt; æ–¹æ³•ï¼Œå¯ä»¥å¯¹ä¸€ä¸ªç»™å®šçš„ iterable ç”Ÿæˆæ‰€æœ‰å¤§å°ä¸º &lt;code&gt;r&lt;/code&gt; çš„æ’åˆ—ï¼Œä¸”è¾“å‡ºæŒ‰ç…§å­—å…¸åºæ’åˆ—ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-Python&#34; data-lang=&#34;Python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; list(permutations(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ABCD&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;))
[(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;A&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;B&amp;#39;&lt;/span&gt;), (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;A&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C&amp;#39;&lt;/span&gt;), (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;A&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;D&amp;#39;&lt;/span&gt;), 
 (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;B&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;A&amp;#39;&lt;/span&gt;), (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;B&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C&amp;#39;&lt;/span&gt;), (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;B&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;D&amp;#39;&lt;/span&gt;), 
 (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;A&amp;#39;&lt;/span&gt;), (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;B&amp;#39;&lt;/span&gt;), (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;D&amp;#39;&lt;/span&gt;), 
 (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;D&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;A&amp;#39;&lt;/span&gt;), (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;D&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;B&amp;#39;&lt;/span&gt;), (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;D&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C&amp;#39;&lt;/span&gt;)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;åœ¨æˆ‘ä¹‹å‰æ‰€æ¥è§¦çš„ç®—æ³•ä¸­ï¼Œæ’åˆ—ç”Ÿæˆè¦ä¹ˆæ˜¯åŸºäºå›æº¯ï¼Œè¦ä¹ˆæ˜¯åŸºäºå­—å…¸åºï¼Œä½†æ— è®ºå“ªç§éƒ½åªèƒ½ç”Ÿæˆå…¨æ’åˆ—ï¼Œè€Œæ— æ³•ç”Ÿæˆè¿™æ ·çš„éƒ¨åˆ†æ’åˆ—ï¼ˆæŒ‡ç”Ÿæˆçš„æ’åˆ—é•¿åº¦ &lt;code&gt;r&lt;/code&gt; å’ŒåŸè¾“å…¥é•¿åº¦ &lt;code&gt;n&lt;/code&gt; ä¸åŒï¼‰ã€‚å¦ä¸€æ¡æ€è·¯æ˜¯å…ˆç”Ÿæˆæ‰€æœ‰é•¿åº¦ä¸º &lt;code&gt;r&lt;/code&gt; çš„ç»„åˆï¼Œç„¶åå†åœ¨æ¯ä¸ªç»„åˆå†…ç”Ÿæˆå…¨æ’åˆ—ï¼Œä½†è¿™æ ·æ— æ³•ä¿è¯è¾“å‡ºæŒ‰å­—å…¸åºï¼ˆé™¤éå…ˆæ‰‹åŠ¨æ”¶é›†å†æ’åºï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;äºæ˜¯æˆ‘æ‰“å¼€äº† Python çš„ &lt;code&gt;itertools&lt;/code&gt; çš„å®˜æ–¹æ–‡æ¡£ï¼Œå…¶ä¸­æä¾›äº†ä¸ CPython å®ç°ç­‰ä»·çš„ Python ä»£ç ï¼Œ&lt;code&gt;permutations&lt;/code&gt; æ–¹æ³•çš„ä»£ç å¦‚ä¸‹ï¼ˆ&lt;a href=&#34;https://docs.python.org/zh-cn/3/library/itertools.html#itertools.permutations&#34;&gt;ğŸ”—&lt;/a&gt;ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;permutations&lt;/span&gt;(iterable, r&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;None):
    &lt;span style=&#34;color:#75715e&#34;&gt;# permutations(&amp;#39;ABCD&amp;#39;, 2) --&amp;gt; AB AC AD BA BC BD CA CB CD DA DB DC&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;# permutations(range(3)) --&amp;gt; 012 021 102 120 201 210&lt;/span&gt;
    pool &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tuple(iterable)
    n &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; len(pool)
    r &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; n &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; r &lt;span style=&#34;color:#f92672&#34;&gt;is&lt;/span&gt; None &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; r
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; r &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; n:
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
    indices &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; list(range(n))
    cycles &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; list(range(n, n&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;r, &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;))
    &lt;span style=&#34;color:#66d9ef&#34;&gt;yield&lt;/span&gt; tuple(pool[i] &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; indices[:r])
    &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; n:
        &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; reversed(range(r)):
            cycles[i] &lt;span style=&#34;color:#f92672&#34;&gt;-=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
            &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; cycles[i] &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;:
                indices[i:] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; indices[i&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;:] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; indices[i:i&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]
                cycles[i] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; i
            &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt;:
                j &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cycles[i]
                indices[i], indices[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;j] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; indices[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;j], indices[i]
                &lt;span style=&#34;color:#66d9ef&#34;&gt;yield&lt;/span&gt; tuple(pool[i] &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; indices[:r])
                &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;
        &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt;:
            &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å°è¯•åˆæ­¥ç†è§£&#34;&gt;å°è¯•åˆæ­¥ç†è§£&lt;/h3&gt;
&lt;p&gt;è™½ç„¶é¡¶éƒ¨æœ‰ä¸¤è¡Œæ³¨é‡Šï¼Œä¸è¿‡è¿™ä¹Ÿåªæ˜¯æè¿°äº†è¿™ä¸ªæ–¹æ³•çš„æ•ˆæœï¼Œå¯¹å…¶åŸç†å¹¶æ²¡æœ‰ä»»ä½•è§£é‡Šã€‚å¾€åç»§ç»­çœ‹ï¼Œå¯ä»¥å‘ç°ç®—æ³•é¦–å…ˆæ„é€ äº†ä¸¤ä¸ª listï¼š&lt;code&gt;indices&lt;/code&gt; å’Œ &lt;code&gt;cycles&lt;/code&gt;ï¼Œä¸”ä¹‹åæ¯æ¬¡è¾“å‡ºç»“æœï¼ˆ&lt;code&gt;yield&lt;/code&gt;ï¼‰å®é™…ä¸Šéƒ½æ˜¯å°† &lt;code&gt;indices&lt;/code&gt; ä¸­çš„å‰ &lt;code&gt;r&lt;/code&gt; ä¸ªè¾“å‡ºã€‚å†å¾€åç®—æ³•è¿›å…¥äº†ä¸€ä¸ªç¥ç§˜çš„ &lt;code&gt;for&lt;/code&gt; å¾ªç¯ï¼Œå¯¹ &lt;code&gt;cycles&lt;/code&gt; ä¸­çš„å…ƒç´ åšäº†ä¸€äº›ä¿®æ”¹ï¼Œç”¨ &lt;code&gt;cycles&lt;/code&gt; çš„å€¼å¯¹ &lt;code&gt;indices&lt;/code&gt; ä¸­çš„ä¸€äº›å…ƒç´ åšäº†äº¤æ¢ã€‚ä»…ä»ä»£ç å±‚é¢å‡ºå‘ï¼Œå¯¹ç®—æ³•çš„ç†è§£ä¼¼ä¹ä¹Ÿå°±æ­¢æ­¥äºæ­¤äº†ã€‚ç„¶è€Œè¿™å¹¶æ²¡æœ‰å›ç­”ä¸€ä¸ªé‡è¦é—®é¢˜ï¼šä¸ºä»€ä¹ˆè¿™ä¸ªç®—æ³•èƒ½å·¥ä½œï¼Ÿ&lt;/p&gt;
&lt;h3 id=&#34;å¯»æ‰¾ç›¸å…³ä¿¡æ¯&#34;&gt;å¯»æ‰¾ç›¸å…³ä¿¡æ¯&lt;/h3&gt;
&lt;p&gt;è€ƒè™‘åˆ° &lt;code&gt;itertools&lt;/code&gt; åº“æ˜¯åœ¨ Python 2.3 ï¼ˆ2003 å¹´ 7 æœˆï¼‰è¢«å¼•å…¥æ ‡å‡†åº“çš„ï¼Œè¿™ä¸ªç®—æ³•å·²ç»ç®—å¾—ä¸Šå†å²æ‚ ä¹…äº†ã€‚å†åŠ ä¹‹ &lt;code&gt;itertools&lt;/code&gt; åº“çš„å¹¿æ³›ä½¿ç”¨ï¼Œè¿™ä¸ªç®—æ³•çš„åŸç†åº”è¯¥æ˜¯æ—©å·²è¢«è¯¦å°½è®°å½•çš„ã€‚å¸¦ç€è¿™æ ·çš„æœŸæœ›ï¼Œæˆ‘å¼€å§‹ç”¨å„ç§å…³é”®è¯ç»„åˆæœç´¢ç›¸å…³ä¿¡æ¯ã€‚å¯æƒœçš„æ˜¯ï¼Œé™¤äº† Stack Overflow ä¸Šä¸€ä¸ª 2010 å¹´çš„é—®é¢˜ï¼ˆ&lt;a href=&#34;https://stackoverflow.com/questions/2565619/algorithm-for-python-itertools-permutations&#34;&gt;ğŸ”—&lt;/a&gt;ï¼‰ï¼Œå’Œä¸€ä¸ªçŸ¥ä¹æé—®ï¼ˆ&lt;a href=&#34;https://www.zhihu.com/question/440688033&#34;&gt;ğŸ”—&lt;/a&gt;ï¼‰ï¼Œå°±æ²¡æœ‰ä»»ä½•å…¶ä»–ç›¸å…³çš„ç½‘é¡µäº†ï¼Œç”šè‡³è¿å½“å¹´çš„æäº¤è®°å½•éƒ½æ‰¾ä¸åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£å°±åªèƒ½ä»è¿™ä¸¤ä¸ªé“¾æ¥å…¥æ‰‹äº†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Stack Overflow çš„ç­”ä¸» Alex å†™äº†ä¸€ç¯‡é•¿æ–‡å›ç­”ï¼Œä½†ä¸€å¼€å¤´å°±è¯´ã€Œä½ éœ€è¦ç†è§£ Permutation Cycle çš„æ•°å­¦ç†è®ºï¼Œæ‰èƒ½ç†è§£è¿™ä¸ªç®—æ³•ã€ã€‚äºæ˜¯æˆ‘åˆå›å¤´æ¶è¡¥äº†ä¸€ç•ªç»„åˆæ•°å­¦ï¼Œç„¶è€Œå°±ç®—æˆ‘å¤§æ¦‚çŸ¥é“ Permutation Cycle æ˜¯æ€ä¹ˆä¸€å›äº‹ï¼Œå¯¹è¿™ä¸ªç®—æ³•ä¾ç„¶æ¯«æ— å¤´ç»ªã€‚ï¼ˆè¯„è®ºä¸­ä¹Ÿæœ‰äººè‡ªç§°æœ‰ 6 å¹´æŠ½è±¡ä»£æ•°ç»éªŒï¼Œä½†ä¸è®¤ä¸ºè¿™ä¸ªç®—æ³•ä¸æ•°å­¦ç›¸å…³ã€‚ï¼‰ä¸è¿‡ Alex çš„å›ç­”æä¾›äº†ä¸€äº›æœ‰ç”¨çš„ç›´è§‰ï¼Œè‡³å°‘è¯»å®Œè¿™ä¸ªå›ç­”æˆ‘å¤§æ¦‚ç†è§£ &lt;code&gt;cycles&lt;/code&gt; åœ¨ç®—æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æ˜¯å¦‚ä½•å˜åŒ–çš„äº†ã€‚å…·ä½“è€Œè¨€ï¼Œ&lt;code&gt;cycles&lt;/code&gt; çš„å˜åŒ–ç±»ä¼¼äºã€Œå€’è®¡æ—¶ã€ï¼Œæˆ–è€…è¯´ã€Œå¸¦å€Ÿä½çš„å‡æ³•ã€ï¼Œæ¯æ¬¡æœ€åä¸€ä½åˆ° 0 æ—¶ï¼Œå°±ä¼šè§¦å‘å‰é¢çš„ä¸€ä½å‡ 1ã€‚ç„¶è€Œæˆ‘å¯¹&lt;code&gt;indices&lt;/code&gt; çš„å˜åŒ–ä¾ç„¶äº‘é‡Œé›¾é‡Œã€‚&lt;/li&gt;
&lt;li&gt;çŸ¥ä¹æé—®ä¸­ï¼Œç­”ä¸»ã€Œæ¨ä¸ªæ¯›ã€æä¾›äº†ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆæœ‰è¯´æœåŠ›çš„å›ç­”ï¼ˆå‰§é€ï¼šè€Œä¸”ä¹Ÿçš„ç¡®å¦‚æ­¤ï¼‰ï¼šã€Œé‚£ä¸ªä»£ç å¯ä»¥çœ‹æˆä¸‹åˆ—é€’å½’ç¨‹åºçš„å¼ºè¡Œéé€’å½’ç‰ˆã€ï¼ŒæŒ‡å‡ºäº† &lt;code&gt;cycles&lt;/code&gt; æ˜¯&lt;strong&gt;å˜è¿›åˆ¶æ•°&lt;/strong&gt;ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªåŸå§‹é€’å½’ç‰ˆæœ¬ã€‚å¯æƒœçš„æ˜¯ï¼Œå¯¹äºè¿™ä¸ªç®—æ³•ä¸ºä»€ä¹ˆå¯ä»¥è¾“å‡ºæ­£ç¡®ç»“æœä¾ç„¶æ²¡æœ‰è§£é‡Šï¼ˆä¹Ÿæœ‰å¯èƒ½æ˜¯æˆ‘æ²¡æœ‰å®Œå…¨ç†è§£ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è‡ªå·±æ¥&#34;&gt;è‡ªå·±æ¥&lt;/h3&gt;
&lt;p&gt;å·²æœ‰çš„ä¿¡æ¯ä¼¼ä¹ä¸æ˜¯å¾ˆå……åˆ†ã€‚çœ‹æ¥æˆ‘åªèƒ½è‡ªå·±æ¥äº†ã€‚åœ¨åŠ äº†ä¸€å † &lt;code&gt;print&lt;/code&gt; å¹¶åœ¨çº¸ä¸Šæ‰‹åŠ¨æ¨¡æ‹Ÿäº†å¤šæ¬¡è¿™ä¸ªç®—æ³•ä¹‹åï¼Œæˆ‘è®¤ä¸ºæˆ‘å¯èƒ½å¤§æ¦‚ç†è§£å®ƒçš„å·¥ä½œåŸç†ï¼Œå¹¶ä¸”å¯ä»¥è¯æ˜å…¶æ­£ç¡®æ€§äº†ã€‚ä¸‹æ–‡å°†è¯¦è¿°æˆ‘çš„ç†è§£ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç®—æ³•&#34;&gt;ç®—æ³•&lt;/h2&gt;
&lt;h3 id=&#34;èµ·æ­¥&#34;&gt;èµ·æ­¥&lt;/h3&gt;
&lt;p&gt;å¼€å§‹å‰ï¼Œéœ€è¦ç»Ÿä¸€ä¸€ä¸‹åæ–‡ä½¿ç”¨çš„è®°å·ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;n&lt;/code&gt; ä»£è¡¨è¾“å…¥ iterable çš„é•¿åº¦&lt;/li&gt;
&lt;li&gt;&lt;code&gt;r&lt;/code&gt; ä»£è¡¨è¾“å‡ºçš„æ’åˆ—å…ƒç»„çš„é•¿åº¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¹¶å›é¡¾æˆ‘ä»¬å…ˆå‰é˜…è¯»ç®—æ³•å¾—åˆ°çš„ç†è§£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹è¾“å…¥çš„ &lt;code&gt;iterable&lt;/code&gt; ä¼šéå†å…¶æ‰€æœ‰å…ƒç´ å¹¶æ”¾åœ¨ &lt;code&gt;pool&lt;/code&gt; ä¸­&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡ç®—æ³•è¾“å‡ºç»“æœï¼ˆ&lt;code&gt;yield&lt;/code&gt;ï¼‰ï¼Œå®é™…ä¸Šåªæ˜¯å–äº† &lt;code&gt;indices&lt;/code&gt; åˆ—è¡¨çš„å‰ &lt;code&gt;r&lt;/code&gt; ä¸ª indexï¼Œå¹¶è¾“å‡º &lt;code&gt;pool&lt;/code&gt; ä¸­çš„å¯¹åº”å…ƒç´ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬å°†æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤ç†è§£è¿™ä¸ªç®—æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç†è§£ &lt;code&gt;cycles&lt;/code&gt; çš„å˜åŒ–&lt;/li&gt;
&lt;li&gt;ç†è§£ &lt;code&gt;indices&lt;/code&gt; çš„å˜åŒ–ï¼Œå¹¶å°è¯•è¯´æ˜è¿™ä¸ªç®—æ³•çš„æ­£ç¡®æ€§&lt;/li&gt;
&lt;li&gt;å°è¯•é‡æ–°å®ç°è¿™ä¸ªç®—æ³•çš„ã€ŒåŸå§‹ã€é€’å½’ç‰ˆæœ¬&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;cycles&#34;&gt;&lt;code&gt;cycles&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆä» &lt;code&gt;cycles&lt;/code&gt; å˜é‡å…¥æ‰‹ï¼Œç†è§£å®ƒåœ¨è¿™ä¸ªç®—æ³•ä¸­æ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚è¿™ä¸ªé˜¶æ®µæˆ‘ä»¬æš‚æ—¶å…ˆä¸è€ƒè™‘ &lt;code&gt;indices&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥å…ˆæŒ‡å®šä¸€äº›å…·ä½“çš„è¾“å…¥ï¼Œç„¶åå°è¯•åŠ ä¸€äº› &lt;code&gt;print&lt;/code&gt; è¯­å¥ã€‚ä»¥ &lt;code&gt;iterable=&amp;quot;ABCD&amp;quot;, r=2&lt;/code&gt; ä½œä¸ºè¾“å…¥ï¼Œåœ¨ &lt;code&gt;if&lt;/code&gt; å’Œ &lt;code&gt;else&lt;/code&gt; ä¸¤ä¸ªåˆ†æ”¯æ‰§è¡Œå‰åä¸­éƒ½æ’å…¥ &lt;code&gt;print&lt;/code&gt;ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼šï¼ˆå…¶ä¸­ä¸­æ‹¬å·è¯´æ˜ç®—æ³•æœ‰è¾“å‡º &lt;code&gt;yield&lt;/code&gt;ï¼Œå¤§æ‹¬å·éƒ¨åˆ†ç®—æ³•æ— è¾“å‡ºï¼‰&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;[4,3] -&amp;gt; [4,2] -&amp;gt; [4,1] -&amp;gt; {4,0} -&amp;gt; {4,3} -&amp;gt; 
[3,3] -&amp;gt; [3,2] -&amp;gt; [3,1] -&amp;gt; {3,0} -&amp;gt; {3,3} -&amp;gt; 
[2,3] -&amp;gt; [2,2] -&amp;gt; [2,1] -&amp;gt; {2,0} -&amp;gt; {2,3} -&amp;gt; 
[1,3] -&amp;gt; [1,2] -&amp;gt; [1,1] -&amp;gt; {1,0} -&amp;gt; {1,3} -&amp;gt; {0,3} -&amp;gt; {4,3}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥ç›´è§‚æ„Ÿå—åˆ°ï¼Œä¼¼ä¹ &lt;code&gt;cycles&lt;/code&gt; å˜é‡å°±åƒä¸€ä¸ªã€Œå€’è®¡æ—¶ã€ï¼Œæˆ–è€…è¯´ã€Œå¸¦å€Ÿä½çš„å‡æ³•ã€ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€å¼€å§‹ &lt;code&gt;cycles[0]&lt;/code&gt; è¢«åˆå§‹åŒ–ä¸º 4ï¼Œ&lt;code&gt;cycles[1]&lt;/code&gt; è¢«åˆå§‹åŒ–ä¸º 3ã€‚&lt;/li&gt;
&lt;li&gt;ä¹‹åçš„å¾ªç¯ä¸­ï¼Œä¸€èˆ¬æ˜¯ &lt;code&gt;cycles[1]&lt;/code&gt; ä¸æ–­è¢«å‡ 1ã€‚å½“ &lt;code&gt;cycles[1] != 0&lt;/code&gt; æ—¶ï¼Œç®—æ³•ä¼šäº§ç”Ÿä¸€æ¬¡è¾“å‡ºã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;cycles[1] == 0&lt;/code&gt;ï¼Œä¼šå¯¼è‡´ &lt;code&gt;cycles[0]&lt;/code&gt; ï¼ˆå‰ä¸€ä½ï¼‰å‡ 1ï¼Œå¹¶å°† &lt;code&gt;cycles[1]&lt;/code&gt; é‡è®¾å›å…¶åˆå§‹å€¼ 3ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åå½“ &lt;code&gt;cycles[0] == 0&lt;/code&gt; æ—¶ï¼Œç®—æ³•ç»“æŸã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»è¿™ä¸ªå…·ä½“çš„ç¤ºä¾‹å‡ºå‘ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ &lt;code&gt;cycles&lt;/code&gt; çš„å˜åŒ–ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€å¼€å§‹ &lt;code&gt;cycles&lt;/code&gt; è¢«åˆå§‹åŒ–ä¸º &lt;code&gt;range(n, n-r, -1)&lt;/code&gt;ï¼Œå³ &lt;code&gt;cycles[0]=n&lt;/code&gt;ï¼Œ&lt;code&gt;cycles[1]=n-1&lt;/code&gt;ï¼Œ&amp;hellip;ï¼Œ&lt;code&gt;cycles[i]=n-i&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¹‹åçš„å¾ªç¯ä¸­ï¼Œé€šå¸¸åªæœ‰æœ€åä¸€ä¸ªå…ƒç´  &lt;code&gt;cycles[r-1]&lt;/code&gt; åœ¨ä¸æ–­é€’å‡ã€‚å¦‚æœ &lt;code&gt;cycles[r-1]&lt;/code&gt; é€’å‡åå€¼ä¸ä¸º 0ï¼Œåˆ™ç®—æ³•ä¼šäº§ç”Ÿä¸€æ¬¡è¾“å‡ºã€‚ç”¨æˆ‘ä»¬ä¹‹å‰æåˆ°çš„ã€Œå€’è®¡æ—¶ã€ç±»æ¯”ï¼Œå¯ä»¥å°†è¿™ç§æƒ…å†µç§°ä¹‹ä¸º tickã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ &lt;code&gt;cycles&lt;/code&gt; ä¸­çš„æŸä¸ªå…ƒç´ ï¼ˆå¦‚ &lt;code&gt;cycles[i]&lt;/code&gt;ï¼‰ä¸º 0ï¼Œä¼šå¯¼è‡´å…¶å‰é¢çš„å…ƒç´ è¢«ï¼ˆ&lt;code&gt;cycles[i-1]&lt;/code&gt;ï¼‰å‡ 1ï¼Œå¹¶å°†è¿™ä¸ªå…ƒç´ ï¼ˆ&lt;code&gt;cycles[i]&lt;/code&gt;ï¼‰é‡è®¾å›å…¶åˆå§‹å€¼ï¼ˆ&lt;code&gt;n-i&lt;/code&gt;ï¼‰ã€‚è¿™ä¸€è¡Œä¸ºç±»ä¼¼äºå€’è®¡æ—¶ä¸­ç§’ä¸º 0 æ—¶ä¼šå¯¼è‡´åˆ†å‡ 1ï¼Œå¹¶å°†ç§’é‡è®¾å› 0ã€‚ç»§ç»­ç”¨ã€Œå€’è®¡æ—¶ã€ç±»æ¯”ï¼Œå¯ä»¥å°†è¿™ç§æƒ…å†µç§°ä¹‹ä¸º resetã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ‰äº†è¿™ä¸€ç›´è§‚æ„Ÿå—ï¼Œå°±å¯ä»¥ä¸º &lt;code&gt;cycles&lt;/code&gt; æ‰¾å‡ºä¸€ä¸ªå¯èƒ½çš„è§£é‡Šï¼ˆã€Œç‰©ç†å«ä¹‰ã€ï¼‰äº†ã€‚æˆ‘è®¤ä¸ºï¼Œ&lt;code&gt;cycles&lt;/code&gt; ä»£è¡¨çš„æ˜¯ &lt;strong&gt;ã€Œæ¯ä¸ªä½ç½®ä¸Šå‰©ä½™çš„å¯ç”¨é€‰æ‹©æ•°ã€&lt;/strong&gt; ã€‚å¦‚æœå°† &lt;code&gt;cycles&lt;/code&gt; è§†ä½œä¸€ä¸ªå˜è¿›åˆ¶æ•°ï¼Œåˆ™ &lt;code&gt;cycles&lt;/code&gt; ä¹Ÿä»£è¡¨ &lt;strong&gt;ã€Œæ€»ä½“å‰©ä½™è¿˜æ²¡æœ‰è¾“å‡ºçš„æ’åˆ—æ•°ã€&lt;/strong&gt; ã€‚ç†ç”±å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€å¼€å§‹ &lt;code&gt;cycles&lt;/code&gt; è¢«åˆå§‹åŒ–ä¸º &lt;code&gt;range(n, n-r, -1)&lt;/code&gt;ï¼Œè€Œå¯ä»¥è®¡ç®—å‡ºå¯¹ç»™å®šçš„ &lt;code&gt;n&lt;/code&gt;, &lt;code&gt;r&lt;/code&gt; æ‰€æœ‰çš„æ’åˆ—æœ‰ &lt;code&gt;P(n,r) = n*(n-1)*...*(n-r-1)&lt;/code&gt; ç§ã€‚&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡ tickï¼Œç®—æ³•ç”Ÿæˆä¸€ä¸ªæ’åˆ—ï¼Œæ¶ˆè€—ä¸€ä¸ªé€‰æ‹©ï¼Œ&lt;code&gt;cycles[i]&lt;/code&gt; ä¹Ÿå‡ 1&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡ resetï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨ &lt;code&gt;cycles&lt;/code&gt; è¿™ä¸ªå˜è¿›åˆ¶æ•°ä¸Šçš„å€Ÿä½å‡æ³•&lt;/li&gt;
&lt;li&gt;æœ€ååœ¨ &lt;code&gt;cycles&lt;/code&gt; ä¸Šé¦–ä½ä¸º 0 æ—¶ç®—æ³•ç»“æŸï¼Œä»£è¡¨æ‰€æœ‰æ’åˆ—çš„é€‰æ‹©éƒ½å·²ç»è¢«æ¶ˆè€—ï¼ˆè¾“å‡ºï¼‰äº†ï¼Œå·²ç»æ²¡æœ‰æ›´å¤šçš„æ’åˆ—äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶å® &lt;code&gt;cycles&lt;/code&gt; çš„å˜åŒ–ï¼Œæ— è®ºæ˜¯ Stack Overflow ä¸Šçš„å›ç­”ï¼Œè¿˜æ˜¯çŸ¥ä¹ä¸Šçš„å›ç­”ï¼Œéƒ½æœ‰ç›¸å¯¹è¯¦å°½çš„æè¿°ã€‚åœ¨æ­¤æˆ‘åªæ˜¯å°è¯•ä»¥è‡ªå·±çš„è¯­è¨€é‡è¿°äº†ä¸€æ¬¡è€Œå·²ã€‚ä½†æ¥ä¸‹æ¥å¯¹ &lt;code&gt;indices&lt;/code&gt; çš„ç†è§£å°±å¤§éƒ¨åˆ†æ˜¯æˆ‘è‡ªå·±çš„äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;indices&#34;&gt;&lt;code&gt;indices&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹ &lt;code&gt;indices&lt;/code&gt; æ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚å’Œä¹‹å‰å¯¹ &lt;code&gt;cycles&lt;/code&gt; çš„æ¢ç´¢ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå…ˆä»ä¸€ä¸ªå…·ä½“çš„ä¾‹å­å¼€å§‹ï¼š&lt;code&gt;iterable=&amp;quot;ABCDE&amp;quot;,r=3&lt;/code&gt;ï¼Œå¹¶å…³æ³¨ä¸€ä¸ªå­é—®é¢˜ï¼šå‰ 3 ä¸ªè¾“å‡ºï¼ˆABC, ABD, ABEï¼‰æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚ä¸ºä¾¿äºå±•ç¤ºï¼Œè¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨å…·ä½“å…ƒç´ ï¼ˆå­—æ¯ï¼‰ä»£æ›¿ indexã€‚åŠ äº†ä¸€äº› &lt;code&gt;print&lt;/code&gt; åï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„å˜åŒ–è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://nekonull.me/img/py_permutation.png&#34; alt=&#34;py_permutation&#34;&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå›¾ç¨å¾®æœ‰äº›å¤æ‚ã€‚ä»¥ä¸‹æ˜¯è¿›ä¸€æ­¥è§£é‡Šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å›¾çš„é˜…è¯»é¡ºåºæ˜¯ä»ä¸Šè‡³ä¸‹ï¼ŒæŒ‰ç…§æ—¶é—´é¡ºåºå±•ç¤ºäº†&lt;code&gt;indices&lt;/code&gt; åˆ—è¡¨çš„å˜åŒ–ã€‚å·¦ä¾§ä¸ºå„é˜¶æ®µå…·ä½“è¡Œä¸ºçš„æ ‡æ³¨ï¼Œå³ä¾§ä¸ºç®—æ³•è¾“å‡ºã€‚&lt;/li&gt;
&lt;li&gt;è¿™é‡Œé€‰æ‹©å±•ç¤ºå‰ 3 æ¬¡è¾“å‡ºï¼ˆå³ &lt;code&gt;i=2&lt;/code&gt;ï¼‰ï¼Œå¯¹åº” &lt;code&gt;cycles[2]&lt;/code&gt; ä» 3 åˆ° 0 çš„è¿‡ç¨‹ã€‚åˆ«å¿˜äº†æ¯æ¬¡è¿›å…¥å¾ªç¯å‰ &lt;code&gt;cycles[2]&lt;/code&gt; ä¼šè¢«é€’å‡ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºæ–¹ä¾¿æè¿°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ &lt;code&gt;indices&lt;/code&gt; åˆ—è¡¨æ‹†æˆ 3 ä¸ªéƒ¨åˆ†ï¼š
&lt;ul&gt;
&lt;li&gt;fixedï¼š&lt;code&gt;indices[0:1]&lt;/code&gt;ï¼Œåœ¨æ‰§è¡Œæ—¶ä¸ä¼šå˜åŒ–&lt;/li&gt;
&lt;li&gt;changingï¼š&lt;code&gt;indices[2]&lt;/code&gt;ï¼Œè¿™æ˜¯åœ¨ä¸æ–­è¢«äº¤æ¢çš„å…ƒç´ ï¼Œå’Œ fixed ä¸€èµ·ç»„æˆäº†ç®—æ³•è¾“å‡ºï¼ˆ&lt;code&gt;indices[0:2]&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;backlogï¼š&lt;code&gt;indices[3:4]&lt;/code&gt;ï¼Œè¿™é‡Œå­˜æ”¾ç€å·²ç»è¢«ä½¿ç”¨çš„å…ƒç´ å’Œè¿˜æœªè¢«ä½¿ç”¨çš„å…ƒç´ &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨æ¯ä¸ª tick ä¸­ï¼Œchanging ä½ç½®ä¸Šçš„å…ƒç´ å’Œ backlog ä¸­çš„ä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼ˆ&lt;code&gt;swap&lt;/code&gt;ï¼‰ï¼Œå¹¶è§¦å‘ä¸€æ¬¡è¾“å‡ºã€‚å¯ä»¥æ³¨æ„åˆ°ï¼Œäº¤æ¢å‰å backlog ä¸­å…ƒç´ ä¾ç„¶ç»´æŒå…¶ç›¸å¯¹é¡ºåºã€‚
&lt;ul&gt;
&lt;li&gt;ABC{DE} -&amp;gt; ABD{CE} -&amp;gt; ABE{CD}&lt;/li&gt;
&lt;li&gt;æ³¨ï¼šè¿™é‡Œå°†ç®—æ³•å¼€å§‹æ—¶çš„é¦–æ¬¡è¾“å‡ºä¹Ÿè§†ä½œä¸€ä¸ª tickï¼Œå› ä¸ºè¿›å…¥å¾ªç¯å‰ä¾ç„¶è§¦å‘äº†é€’å‡ï¼Œæ¶ˆè€—äº†ä¸€ä¸ªå¯èƒ½æ€§ã€‚&lt;/li&gt;
&lt;li&gt;ç›¸å…³ä»£ç ï¼š&lt;code&gt;indices[i], indices[-j] = indices[-j], indices[i]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç®—æ³•ç»“æŸå‰ï¼Œä¸€å…±è§¦å‘äº† 3 æ¬¡è¾“å‡ºã€‚è¿™å·²ç»ç©·å°½äº†å›ºå®šå‰ç¼€ä¸º &lt;code&gt;AB&lt;/code&gt;ï¼Œæœ€åä¸€ä¸ªå¯é€‰é¡¹ä¸º &lt;code&gt;C&lt;/code&gt;, &lt;code&gt;D&lt;/code&gt;, &lt;code&gt;E&lt;/code&gt; çš„æ’åˆ—ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æœ€å reset æ—¶ï¼Œchanging ä½ç½®ä¸Šçš„å…ƒç´ è¢«ç§»åˆ°äº† backlog åï¼ˆ&lt;code&gt;move_to_last&lt;/code&gt;ï¼‰ã€‚è¿™ä¸€æ­¥å®Œæˆåï¼Œchanging + backlog è¿™ä¸ªå­åˆ—è¡¨ï¼ˆ&lt;code&gt;indices[2:4]&lt;/code&gt;ï¼‰æ¢å¤äº†å’Œç®—æ³•å¼€å§‹æ—¶ä¸€æ ·çš„é¡ºåºã€‚
&lt;ul&gt;
&lt;li&gt;AB{E}CD -&amp;gt; ABCD{E}&lt;/li&gt;
&lt;li&gt;ç›¸å…³ä»£ç ï¼š&lt;code&gt;indices[i:] = indices[i+1:] + indices[i:i+1]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯ä»¥å‘ç°ï¼Œè¿™éƒ¨åˆ†æ‰§è¡Œè¿‡ç¨‹ï¼Œæ°å¥½æ»¡è¶³äº†å›æº¯ç®—æ³•çš„æ­£ç¡®æ€§è¦æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ†æ­¥è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œæ¯æ­¥ä¸­å›ºå®šä¹‹å‰æ­¥éª¤çš„é€‰æ‹©ä¸å˜&lt;/li&gt;
&lt;li&gt;ç®—æ³•æ‰§è¡Œä¸­ï¼Œéå†å½“å‰æ­¥çš„æ‰€æœ‰å¯èƒ½æ€§&lt;/li&gt;
&lt;li&gt;ç®—æ³•æ‰§è¡Œåï¼Œå–æ¶ˆå½“å‰æ­¥çš„è®¡ç®—ï¼Œé€€å›ä¸Šä¸€æ­¥ï¼Œé€‰æ‹©ä¸‹ä¸€ä¸ªå¯é€‰é¡¹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è™½ç„¶å›¾ä¸­ä»…æè¿°äº†ä¸€ä¸ªå­é—®é¢˜ï¼ˆ&lt;code&gt;i=2&lt;/code&gt;ï¼Œæˆ–è€…è¯´&lt;code&gt;i=r-1&lt;/code&gt;ï¼‰ï¼Œä½†ä¸éš¾å‘ç°å¯¹äºå…¶ä»–çš„ &lt;code&gt;i&lt;/code&gt;âˆˆ&lt;code&gt;[0, r-1]&lt;/code&gt; è¿™ä¸€è®¨è®ºéƒ½æ˜¯æˆç«‹çš„ã€‚è¿™ä¹Ÿï¼ˆä¸ä¸¥æ ¼åœ°ï¼‰è¯´æ˜äº†è¿™ä¸€ç®—æ³•çš„ç¡®å¯ä»¥éå†æ‰€æœ‰çš„å¯èƒ½æ’åˆ—ã€‚è¾“å‡ºé¡ºåºä¸ºå­—å…¸åºï¼Œåˆ™æ˜¯å› ä¸ºæ¯ä¸ª tick ä¸­äº¤æ¢å…ƒç´ æ—¶éƒ½ç»´æŠ¤äº† backlog ä¸­çš„ç›¸å¯¹é¡ºåºã€‚&lt;/p&gt;
&lt;p&gt;è¿™éƒ¨åˆ†è®¨è®ºæœ‰äº›å¤æ‚ï¼Œå¦‚æœä¸å¤ªç†è§£ï¼ˆæˆ–è€…ä¸å®Œå…¨ä¿¡æœï¼‰çš„è¯ï¼Œå¯ä»¥è‡ªå·±å¤šåŠ ç‚¹ &lt;code&gt;print&lt;/code&gt; ï¼Œæˆ–è€…æ‰‹åŠ¨åœ¨çº¸ä¸Šæ‰§è¡Œæ„Ÿå—ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é‡æ–°å®ç°&#34;&gt;é‡æ–°å®ç°&lt;/h3&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†è¿™ä¸ªç®—æ³•çš„åŸç†ï¼Œé‡æ–°å®ç°å…¶åŸå§‹é€’å½’ç‰ˆæœ¬ä¹Ÿå°±ä¸éš¾äº†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€’å½’è°ƒç”¨æ—¶ï¼Œéœ€è¦ä¸€ä¸ªå‚æ•°æŒ‡å®šå½“å‰ä¿®æ”¹çš„å…ƒç´ ï¼ˆchangingï¼‰çš„ index&lt;/li&gt;
&lt;li&gt;åœ¨æ¯ä¸€å±‚è°ƒç”¨ä¸­ï¼Œäº¤æ¢ changing å’Œ backlog ä¸­çš„æ‰€æœ‰é¡¹ï¼Œå¹¶åœ¨æ¯æ¬¡äº¤æ¢ï¼ˆåšå‡ºé€‰æ‹©ï¼‰åè§¦å‘ä¸‹ä¸€å±‚&lt;/li&gt;
&lt;li&gt;å¦‚æœ backlog ä¸­çš„æ‰€æœ‰å¯é€‰é¡¹éƒ½å·²ç»è¢«é€‰æ‹©ï¼ˆæ¶ˆè€—ï¼‰äº†ï¼Œå°±æŠŠå½“å‰çš„ changing ç§»åˆ° backlog åï¼Œä»¥æ’¤é”€è¿™ä¸€å±‚çš„é€‰æ‹©&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¯èƒ½çš„ Python é‡æ–°å®ç°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;## a reimplementation of `itertools.permutation`&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# helpers&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;swap&lt;/span&gt;(list, i, j):
    list[i], list[j] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; list[j], list[i]

&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;move_to_last&lt;/span&gt;(list, i):
    list[i:] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; list[i&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;:] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; [list[i]]

&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;print_first_n_element&lt;/span&gt;(list, n):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;join(list[:n]))

&lt;span style=&#34;color:#75715e&#34;&gt;# backtracking dfs&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;permutations&lt;/span&gt;(list, r, changing_index):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; changing_index &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; r:
        &lt;span style=&#34;color:#75715e&#34;&gt;# we&amp;#39;ve reached the deepest level&lt;/span&gt;
        print_first_n_element(list, r)
        &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
    
    &lt;span style=&#34;color:#75715e&#34;&gt;# a pseudo `tick`&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;# process initial permutation&lt;/span&gt;
    &lt;span style=&#34;color:#75715e&#34;&gt;# which is just doing nothing (using the initial value)&lt;/span&gt;
    permutations(list, r, changing_index &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)

    &lt;span style=&#34;color:#75715e&#34;&gt;# note: initial permutaion has been outputed, thus the minus 1&lt;/span&gt;
    remaining_choices &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; len(list) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; changing_index
    &lt;span style=&#34;color:#75715e&#34;&gt;# for (i=1;i&amp;lt;=remaining_choices;i++)&lt;/span&gt;
    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; range(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, remaining_choices&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;):
        &lt;span style=&#34;color:#75715e&#34;&gt;# `tick` phases&lt;/span&gt;
        
        &lt;span style=&#34;color:#75715e&#34;&gt;# make one swap&lt;/span&gt;
        swap_idx &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; changing_index &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; i
        swap(list, changing_index, swap_idx)
        &lt;span style=&#34;color:#75715e&#34;&gt;# finished one move at current level, now go deeper&lt;/span&gt;
        permutations(list, r, changing_index &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
    
    &lt;span style=&#34;color:#75715e&#34;&gt;# `reset` phase&lt;/span&gt;
    move_to_last(list, changing_index)

&lt;span style=&#34;color:#75715e&#34;&gt;# wrapper&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;permutations_wrapper&lt;/span&gt;(list, r):
    permutations(list, r, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;# main&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; __name__ &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;__main__&amp;#34;&lt;/span&gt;:
    my_list &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D&amp;#34;&lt;/span&gt;]
    permutations_wrapper(my_list, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é€’å½’è½¬å¾ªç¯ä¼˜åŒ–&#34;&gt;é€’å½’è½¬å¾ªç¯ä¼˜åŒ–&lt;/h3&gt;
&lt;p&gt;å‡ºäºæ€§èƒ½å’Œå®‰å…¨ï¼ˆé˜²æ­¢çˆ†æ ˆï¼‰çš„è€ƒé‡ï¼Œæˆ‘ä»¬ä¼šæƒ³å°†è¿™ä¸ªç®—æ³•çš„é€’å½’ç‰ˆæœ¬è½¬æ¢æˆå¾ªç¯ç‰ˆæœ¬ã€‚è¿™éœ€è¦æˆ‘ä»¬ç”¨æ ˆæ‰‹åŠ¨ç»´æŠ¤æ¯ä¸€å±‚é€’å½’çš„ç›¸å…³çŠ¶æ€ï¼ŒåŒ…æ‹¬é€’å½’ä¸­çš„å˜é‡å’Œä¸‹ä¸€æ¬¡æ‰§è¡Œçš„å¼€å§‹ä½ç½®ã€‚å¹¸è¿çš„æ˜¯ï¼Œå¯¹è¿™ä¸ªç®—æ³•è€Œè¨€ï¼Œæˆ‘ä»¬éœ€è¦ç»´æŠ¤çš„çŠ¶æ€å¹¶ä¸å¤šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;r&lt;/code&gt; æ˜¯å·²çŸ¥ä¸”å›ºå®šçš„ï¼Œå³æ ˆçš„æœ€å¤§æ·±åº¦ä¸º &lt;code&gt;r&lt;/code&gt;ï¼Œå› æ­¤å¯ä»¥ç”¨ä¸€ä¸ªå›ºå®šå¤§å°çš„åˆ—è¡¨æ¥è¡¨ç¤ºæ ˆä¸­ï¼ˆæ¯ä¸€å±‚é€’å½’ï¼‰çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;changing_idx&lt;/code&gt; æ˜¯æ¯å±‚é€’å½’çš„è¾“å…¥ï¼Œä»£è¡¨å½“å‰å±‚å˜åŒ–çš„å…ƒç´ ã€‚&lt;code&gt;changing_idx&lt;/code&gt; å¯ä»¥ä»æ ˆçš„æ·±åº¦è®¡ç®—å‡ºæ¥ï¼Œæ ˆåº•ä¸º 0ï¼Œå†ä¸Šä¸€å±‚ä¸º 1&amp;hellip; å› æ­¤å®é™…ä¸Šä¸éœ€è¦ç»´æŠ¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;i&lt;/code&gt; æˆ– &lt;code&gt;swap_idx&lt;/code&gt; ä¸ºä¸‹ä¸€æ¬¡äº¤æ¢çš„ç›®æ ‡å…ƒç´  indexã€‚è¿™æ— æ³•ä»æ ˆæœ¬èº«çš„ä¿¡æ¯è®¡ç®—å¾—åˆ°ï¼Œéœ€è¦æˆ‘ä»¬ç»´æŠ¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è¿›å…¥æˆ–é‡æ–°å›åˆ°å½“å‰å±‚é€’å½’çš„å¼€å§‹ä½ç½®ï¼Œå¯ä»¥ç”¨ &lt;code&gt;i&lt;/code&gt; æˆ– &lt;code&gt;swap_idx&lt;/code&gt; æ¨ç®—å¾—åˆ°ï¼šå¦‚æœè¿˜æœ‰å‰©ä½™å¯é€‰é¡¹ï¼Œåˆ™è·³è½¬åˆ° tickï¼›åä¹‹è·³è½¬åˆ° reset&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŸºäºä¸Šæ–‡åˆ†æï¼Œå¯ä»¥å‘ç°æˆ‘ä»¬éœ€è¦ç»´æŠ¤çš„æ ˆæœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é•¿åº¦å›ºå®šä¸º &lt;code&gt;r&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå…ƒç´ ä¸Šç»´æŠ¤ä¸‹ä¸€æ¬¡äº¤æ¢çš„ç›®æ ‡å…ƒç´  index&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å›å¤´çœ‹çœ‹ï¼Œè¿™å®é™…ä¸Šå°±æ˜¯ &lt;code&gt;cycles&lt;/code&gt;ã€‚åœ¨ã€Œå‰©ä½™å¯èƒ½æ•°ã€çš„èº«ä»½ä¹‹å¤–ï¼Œ&lt;code&gt;cycles&lt;/code&gt; ä¹Ÿæ‰¿æ‹…èµ·äº†ç»´æŠ¤é€’å½’çŠ¶æ€çš„èŒè´£ã€‚è€Œä½œè€…å·§å¦™åˆ©ç”¨äº† Python åˆ—è¡¨ç´¢å¼•å¯ä»¥ä¸ºè´Ÿæ•°ä»åå¾€å‰çš„ç‰¹æ€§ï¼Œç»Ÿä¸€äº† &lt;code&gt;cycles&lt;/code&gt; çš„ä¸¤é¢ã€‚&lt;/p&gt;
&lt;p&gt;è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†å¯¹è¿™ä¸€ç®—æ³•çš„åˆ†æã€‚ğŸ‰&lt;/p&gt;
&lt;h2 id=&#34;ç›¸å…³é“¾æ¥&#34;&gt;ç›¸å…³é“¾æ¥&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Python &lt;code&gt;itertools.permutation&lt;/code&gt; æ–‡æ¡£ï¼š&lt;a href=&#34;https://docs.python.org/zh-cn/3/library/itertools.html#itertools.permutations&#34;&gt;itertools &amp;mdash; ä¸ºé«˜æ•ˆå¾ªç¯è€Œåˆ›å»ºè¿­ä»£å™¨çš„å‡½æ•° â€” Python 3.10.4 æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;CPython &lt;code&gt;itertools.permutation&lt;/code&gt; å®ç°ï¼š&lt;a href=&#34;https://github.com/python/cpython/blob/main/Modules/itertoolsmodule.c#L3212&#34;&gt;cpython/itertoolsmodule.c at main Â· python/cpython (github.com)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Stack Overflow ç›¸å…³é—®é¢˜ï¼š&lt;a href=&#34;https://stackoverflow.com/questions/2565619/algorithm-for-python-itertools-permutations&#34;&gt;algorithm for python itertools.permutations - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;çŸ¥ä¹ç›¸å…³é—®é¢˜ï¼š&lt;a href=&#34;https://www.zhihu.com/question/440688033&#34;&gt;å¦‚ä½•ç†è§£Python itertools.permutationsä¸­çš„å…¨æ’åˆ—ç®—æ³•ï¼Ÿ - çŸ¥ä¹ (zhihu.com)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æˆ‘ç»™ Stack Overflow é—®é¢˜å†™çš„å›ç­”ï¼š&lt;a href=&#34;https://stackoverflow.com/questions/2565619/algorithm-for-python-itertools-permutations/72177891#72177891&#34;&gt;algorithm for python itertools.permutations - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>